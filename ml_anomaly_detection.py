from sklearn.ensemble import IsolationForest
import numpy as np
import requests

class AnomalyDetector:
    def __init__(self):
        self.model = IsolationForest(n_estimators=100)

    def train_anomaly_model(self, data):
        """Trains a model to detect anomalies."""
        features = np.array([data['response_time'], data['error_rate']]).reshape(-1, 2)
        self.model.fit(features)

    def detect_anomalies(self, data_point):
        """Detects anomalies based on trained model."""
        features = np.array([data_point['response_time'], data_point['error_rate']]).reshape(1, -1)
        return self.model.predict(features)[0] == -1  # -1 indicates anomaly

    def log_anomaly(self, url, response_time, error_rate):
        """Logs detected anomaly."""
        print(f"Anomaly Detected: {url} - Response Time: {response_time}, Error Rate: {error_rate}")